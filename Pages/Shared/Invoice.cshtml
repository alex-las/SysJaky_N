@model SysJaky_N.Models.Order
@using System.Globalization
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.Extensions.Localization
@using SysJaky_N.Resources
@inject IViewLocalizer Localizer
@inject IStringLocalizer<CompanyContactResources> CompanyContactLocalizer
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@Localizer["InvoiceTitle"]</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
@{
    var culture = CultureInfo.CurrentCulture;
}
    <h1>@Localizer["InvoiceHeading", Model.Id]</h1>
    <p>@Localizer["DateLine", Model.CreatedAt.ToString("d", culture)]</p>

    <h2>@Localizer["CompanyHeading"]</h2>
    <p>
        @CompanyContactLocalizer["CompanyName"]<br />
        @CompanyContactLocalizer["Address"]<br />
        @CompanyContactLocalizer["Registration"]
    </p>

    <h2>@Localizer["ItemsHeading"]</h2>
    <table>
        <thead>
            <tr>
                <th>@Localizer["CourseHeader"]</th>
                <th>@Localizer["QuantityHeader"]</th>
                <th>@Localizer["UnitPriceHeader"]</th>
                <th>@Localizer["VatHeader"]</th>
                <th>@Localizer["TotalHeader"]</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var item in Model.Items)
        {
            <tr>
                <td>@item.Course?.Title</td>
                <td>@item.Quantity</td>
                <td>@item.UnitPriceExclVat.ToString("C", culture)</td>
                <td>@item.Vat.ToString("C", culture)</td>
                <td>@item.Total.ToString("C", culture)</td>
            </tr>
        }
        </tbody>
    </table>
    <h3>@Localizer["SubtotalLine", Model.PriceExclVat.ToString("C", culture)]</h3>
    <h3>@Localizer["VatLine", Model.Vat.ToString("C", culture)]</h3>
    <h3>@Localizer["TotalLine", Model.Total.ToString("C", culture)]</h3>
</body>
</html>

