@page
@model IndexModel
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@{
    ViewData["Title"] = "Home page";
}

<section class="py-5 gradient-hero text-white text-center rounded-4 mb-4">
    <div class="container-xl">
        <h1 class="display-5 fw-bold mb-2">Najděte školení, které <span class="underline-accent">sedne vašemu cíli</span></h1>
        <p class="lead mb-4 opacity-75">Vyberte roli a cíl – my zúžíme výběr. Nebo rovnou hledejte.</p>

        <form method="get" action="/Courses/Index" class="row g-2 justify-content-center" id="heroForm">
            <div class="col-12 col-md-3">
                <select name="persona" class="form-select" aria-label="Jsem" persona-options></select>
            </div>
            <div class="col-12 col-md-3">
                <select name="goal" class="form-select" aria-label="Chci" goal-options></select>
            </div>
            <div class="col-12 col-md-4">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-search"></i></span>
                    <input name="q" class="form-control" placeholder="Hledat kurz, nástroj nebo dovednost…" />
                </div>
            </div>
            <div class="col-12 col-md-2 d-grid">
                <button class="btn btn-light fw-semibold" type="submit">Navrhnout kurzy</button>
            </div>
        </form>

        <div class="d-flex flex-wrap gap-2 justify-content-center mt-3">
            <a class="chip chip-light" href="/Courses/Index?Mode=Online">Online</a>
            <a class="chip chip-light" href="/Courses/Index?CourseGroupId=REKVAL">Rekvalifikace</a>
            <a class="chip chip-light" href="/Courses/Index?Level=Beginner">Začátečník</a>
            <a class="chip chip-light" href="/Courses/Index?City=Praha">Praha</a>
            <a class="chip chip-light" href="/Courses/Index?HasCertificate=true">S certifikátem</a>
        </div>
    </div>
</section>

<section class="container-xl mb-4">
    <div class="trust-stripe rounded-4 p-3">
        <div class="row row-cols-2 row-cols-md-4 g-3 g-md-0 align-items-center text-center text-md-start">
            <div class="col">
                <div class="trust-item d-flex align-items-center justify-content-center justify-content-md-start gap-2">
                    <i class="bi bi-star-fill"></i>
                    <span>Hodnocení 4.8/5</span>
                </div>
            </div>
            <div class="col">
                <div class="trust-item d-flex align-items-center justify-content-center justify-content-md-start gap-2">
                    <i class="bi bi-people"></i>
                    <span>10 000+ absolventů</span>
                </div>
            </div>
            <div class="col">
                <div class="trust-item d-flex align-items-center justify-content-center justify-content-md-start gap-2">
                    <i class="bi bi-shield-check"></i>
                    <span>Garance spokojenosti / snadné storno</span>
                </div>
            </div>
            <div class="col">
                <div class="trust-item d-flex align-items-center justify-content-center justify-content-md-start gap-2">
                    <i class="bi bi-patch-check"></i>
                    <span>Certifikát v ceně vybraných kurzů</span>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Ulož volby pro pozdější předvyplnění (malý závazek = vyšší konverze)
    (function () {
        const form = document.getElementById('heroForm');
        const pSel = form?.querySelector('select[name="persona"]');
        const gSel = form?.querySelector('select[name="goal"]');
        if (pSel && localStorage.persona) pSel.value = localStorage.persona;
        if (gSel && localStorage.goal) gSel.value = localStorage.goal;
        form?.addEventListener('submit', () => {
            if (pSel) localStorage.persona = pSel.value || "";
            if (gSel) localStorage.goal = gSel.value || "";
        });
    })();
</script>

<section class="container-xl">
  <div class="row g-3 align-items-stretch">
    <div class="col-lg-8">
      <div class="feature-card h-100 p-3">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h2 class="h5 mb-0">Doporučeno pro vás</h2>
          <a class="btn btn-sm btn-outline-secondary" href="/Courses/Index">Zobrazit vše</a>
        </div>
        <div class="row g-3">
          @foreach (var c in Model.PicksForPersona)
          {
            <div class="col-12 col-md-6">
              @await Html.PartialAsync("/Pages/Shared/Components/_CourseCard.cshtml", c)
            </div>
          }
          @if (!Model.PicksForPersona.Any())
          {
            <div class="col-12 text-muted">Vyberte nahoře „Jsem… / Chci…“, nebo použijte vyhledávání.</div>
          }
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="feature-card h-100 p-3">
        <h2 class="h6">Co startuje nejdřív</h2>
        <ul class="list-unstyled small mb-3">
          @foreach (var c in Model.FastSoonest)
          {
            <li class="mb-2">
              <a asp-page="/Courses/Details" asp-route-id="@c.Id">@c.Title</a>
              <span class="text-muted">— @c.Date.ToString("d")</span>
            </li>
          }
        </ul>
        <a class="btn btn-outline-primary btn-sm" href="/Courses/Calendar"><i class="bi bi-calendar3"></i> Kalendář termínů</a>
      </div>
    </div>
  </div>

  <div class="row g-3 mt-1">
    <div class="col-12">
      <div class="feature-card p-3">
        <h2 class="h6 mb-2">Novinky</h2>
        <div class="d-flex flex-wrap gap-3">
          @foreach (var a in Model.FreshNews)
          {
            <a class="news-pill" asp-page="/Articles/Details" asp-route-id="@a.Id">@a.Title</a>
          }
        </div>
      </div>
    </div>
  </div>
</section>

<section class="app-section">
    <div class="container-xl">
        <h2 class="section-title text-center">@Localizer["HowItWorksTitle"]</h2>
        <div class="row g-4 text-center">
            <div class="col-md-4">
                <div class="feature-card h-100 p-4">
                    <div class="icon-circle mx-auto mb-3">
                        <i class="bi bi-journal"></i>
                    </div>
                    <h3 class="h5">@Localizer["StepSelectTitle"]</h3>
                    <p class="mb-0">@Localizer["StepSelectDescription"]</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card h-100 p-4">
                    <div class="icon-circle mx-auto mb-3">
                        <i class="bi bi-person-check"></i>
                    </div>
                    <h3 class="h5">@Localizer["StepRegisterTitle"]</h3>
                    <p class="mb-0">@Localizer["StepRegisterDescription"]</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card h-100 p-4">
                    <div class="icon-circle mx-auto mb-3">
                        <i class="bi bi-credit-card"></i>
                    </div>
                    <h3 class="h5">@Localizer["StepPayTitle"]</h3>
                    <p class="mb-0">@Localizer["StepPayDescription"]</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="app-section app-section-alt">
    <div class="container-xl text-center">
        <h2 class="section-title mb-3">Why Choose Our Platform?</h2>
        <p class="mx-auto app-section-description">Our courses are crafted by experts and delivered in an accessible format that helps you learn quickly and effectively.</p>
    </div>
</section>

