@page "{id:int}"
@model SysJaky_N.Pages.Courses.EditModel
@using Microsoft.AspNetCore.Mvc.Rendering
@using SysJaky_N.Pages.Courses
@{
    ViewData["Title"] = "Edit Course";
    var actions = new HtmlContentBuilder();
    var submitButton = new TagBuilder("button");
    submitButton.Attributes["type"] = "submit";
    submitButton.AddCssClass("btn btn-primary");
    submitButton.InnerHtml.Append("Save");
    actions.AppendHtml(submitButton);

    var backLink = new TagBuilder("a");
    backLink.AddCssClass("btn btn-secondary");
    backLink.Attributes["href"] = Url.Page("Index");
    backLink.InnerHtml.Append("Back to List");
    actions.AppendHtml(backLink);
}

<h1>Edit Course</h1>

<form method="post" enctype="multipart/form-data">
    <input type="hidden" asp-for="Course.Id" />
    @if (!string.IsNullOrEmpty(Model.Course.CoverImageUrl))
    {
        <div class="mb-3">
            <img src="@Model.Course.CoverImageUrl" alt="Cover for @Model.Course.Title" class="img-fluid rounded" style="max-width: 240px;" />
        </div>
    }

    <partial name="Courses/Shared/_CourseForm" model="new CourseFormModel
    {
        Course = Model.Course,
        CourseGroups = Model.CourseGroups,
        CoverImage = Model.CoverImage,
        ActionButtons = actions
    }" />
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
