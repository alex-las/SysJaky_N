@using System.Linq
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@{
    var faqItems = Enumerable.Range(1, 5)
        .Select(id => new
        {
            Id = id,
            Question = Localizer[$"FaqQuestion{id}"].Value,
            Answer = Localizer[$"FaqAnswer{id}"].Value
        })
        .Where(item => !string.IsNullOrWhiteSpace(item.Question) && !string.IsNullOrWhiteSpace(item.Answer))
        .ToList();

    var sectionEyebrow = Localizer["SectionEyebrow"].Value ?? string.Empty;
    var sectionHeading = Localizer["SectionHeading"].Value ?? string.Empty;
    var sectionDescription = Localizer["SectionDescription"].Value ?? string.Empty;
    var toggleLabelTemplate = Localizer["ToggleLabel"].Value ?? "Toggle item {0}";
}

<section class="py-16 bg-slate-50">
    <div class="container">
        <div class="mx-auto max-w-3xl space-y-10" x-data="{ activeItem: null }">
            <div class="text-center space-y-4">
                <span class="text-sm font-semibold tracking-[0.2em] uppercase text-primary">@sectionEyebrow</span>
                <h2 class="text-3xl font-semibold text-slate-900">@sectionHeading</h2>
                <p class="text-base text-slate-600">@sectionDescription</p>
            </div>

            <div class="space-y-4">
                @foreach (var item in faqItems)
                {
                    <article class="card-modern overflow-hidden" x-data="{ id: @item.Id }">
                        <button type="button"
                                class="flex w-full items-center justify-between gap-6 px-6 py-5 text-left transition hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/70"
                                :aria-expanded="activeItem === id"
                                x-on:click="activeItem = activeItem === id ? null : id">
                            <span class="text-lg font-semibold text-slate-900">@item.Question</span>
                            <span class="inline-flex h-10 w-10 items-center justify-center rounded-full text-primary transition"
                                  :class="activeItem === id ? 'bg-primary text-white shadow-sm' : 'bg-slate-100'">
                                <i class="bi text-base" :class="activeItem === id ? 'bi-dash-lg' : 'bi-plus-lg'" aria-hidden="true"></i>
                                <span class="sr-only">@string.Format(toggleLabelTemplate, item.Id)</span>
                            </span>
                        </button>
                        <div class="px-6 pb-6 text-slate-600" x-cloak x-show="activeItem === id"
                             x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 -translate-y-1"
                             x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease-in duration-150"
                             x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 -translate-y-1">
                            <p class="text-base leading-relaxed">@item.Answer</p>
                        </div>
                    </article>
                }
            </div>
        </div>
    </div>
</section>
