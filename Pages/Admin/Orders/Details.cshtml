@page "{id:int}"
@model SysJaky_N.Pages.Admin.Orders.DetailsModel
@using System.Collections.Generic
@using SysJaky_N.Models
@using SysJaky_N.Models.ViewModels
@{
    ViewData["Title"] = $"Objednávka {Model.Order.Id}";
    var statusTexts = new Dictionary<string, string>
    {
        ["Pending"] = "Čeká na platbu",
        ["Paid"] = "Zaplaceno",
        ["Cancelled"] = "Zrušeno",
        ["Refunded"] = "Vráceno"
    };

    var orderResources = new OrderDetailsViewModel
    {
        Order = Model.Order,
        PaymentEnabled = Model.PaymentEnabled,
        QrCodeImage = Model.QrCodeImage,
        StatusLabel = "Stav:",
        DateLabel = "Datum:",
        CourseHeader = "Kurz",
        QuantityHeader = "Množství",
        UnitPriceExclVatHeader = "Jednotková cena (bez DPH)",
        VatHeader = "DPH",
        TotalHeader = "Celkem",
        SubtotalLabel = "Mezisoučet (bez DPH):",
        VatLabel = "DPH:",
        TotalLabel = "Celkem:",
        SeatTokensHeading = "Přístupové tokeny",
        CourseFallbackFormat = "Kurz {0}",
        SeatTokenRedeemedFormat = "uplatněno {0}",
        SeatTokenAvailableText = "k dispozici",
        QrCodeAltText = "QR kód",
        PayButtonText = "Spustit platbu",
        DownloadInvoiceText = "Stáhnout fakturu",
        StatusTranslations = OrderStatusExtensions.CreateTranslationMap(status =>
            statusTexts.TryGetValue(status.GetLocalizationKeySuffix(), out var text)
                ? text
                : status.ToString())
    };
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a asp-page="Index">Objednávky</a></li>
        <li class="breadcrumb-item active" aria-current="page">Objednávka @Model.Order.Id</li>
    </ol>
</nav>

<h1>Objednávka @Model.Order.Id</h1>

<partial name="~/Pages/Shared/Orders/_OrderDetails.cshtml" model="orderResources" />
