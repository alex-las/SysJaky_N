@page "{id:int}"
@model SysJaky_N.Pages.CourseTerms.DetailsModel
@using System.Globalization

@{
    ViewData["Title"] = "Detail termínu";
    var startLocal = Model.Term.StartUtc.ToLocalTime();
    var endLocal = Model.Term.EndUtc.ToLocalTime();
    var seatsAvailable = Model.Term.Capacity - Model.Term.SeatsTaken;
    var instructor = Model.Term.Instructor;
    var course = Model.Term.Course;
}

<h1>@Model.CourseTitle</h1>

<section class="mb-4">
    <h2 class="h4">Detail termínu</h2>
    <dl class="row">
        <dt class="col-sm-3">Začátek</dt>
        <dd class="col-sm-9">@startLocal.ToString("f", CultureInfo.CurrentCulture)</dd>
        <dt class="col-sm-3">Konec</dt>
        <dd class="col-sm-9">@endLocal.ToString("f", CultureInfo.CurrentCulture)</dd>
        <dt class="col-sm-3">Kapacita</dt>
        <dd class="col-sm-9">@Model.Term.Capacity</dd>
        <dt class="col-sm-3">Obsazeno</dt>
        <dd class="col-sm-9">@Model.Term.SeatsTaken</dd>
        <dt class="col-sm-3">Volná místa</dt>
        <dd class="col-sm-9">@Math.Max(0, seatsAvailable)</dd>
        <dt class="col-sm-3">Stav</dt>
        <dd class="col-sm-9">@(Model.Term.IsActive ? "Aktivní" : "Neaktivní")</dd>
        @if (instructor != null)
        {
            <dt class="col-sm-3">Lektor</dt>
            <dd class="col-sm-9">@instructor.FullName</dd>
        }
    </dl>
</section>

@if (!string.IsNullOrWhiteSpace(course?.Description))
{
    <section class="mb-4">
        <h2 class="h4">O kurzu</h2>
        <p>@course.Description</p>
    </section>
}

<section class="d-flex flex-column flex-sm-row gap-2">
    <a class="btn btn-primary" href="/Courses/Details/@Model.Term.CourseId">Detail kurzu</a>
    <a class="btn btn-outline-secondary" href="/CourseTerms/ICS/@Model.Term.Id">Přidat do kalendáře</a>
</section>
